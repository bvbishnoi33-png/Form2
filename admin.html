<!DOCTYPE html>
<html>
<head>
<title>Admin</title>
<style>
body{font-family:Inter;background:#f4f6fb;padding:24px}
.card{background:#fff;padding:16px;border-radius:10px;margin-bottom:12px}
input,button{padding:8px}
button{background:#2563eb;color:#fff;border:none;border-radius:6px}
</style>
</head>

<body>

<h2>Admin Dashboard</h2>

<input id="name" placeholder="Form Name">
<button onclick="create()">Create</button>

<div id="list"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
 apiKey:"AIzaSyDVP6-QjZMZhUoWFJ80WRNH3ieyhHWq3gQ",
 authDomain:"form2-9ad72.firebaseapp.com",
 projectId:"form2-9ad72"
});
const db = getFirestore(app);

async function load(){
 list.innerHTML="";
 const snap=await getDocs(collection(db,"forms"));
 snap.forEach(d=>{
  const f=d.data();
  list.innerHTML+=`
   <div class="card">
    ${f.name} |
    <button onclick="toggle('${d.id}',${!f.enabled})">
      ${f.enabled?'Hide':'Show'}
    </button>
   </div>`;
 });
}
load();

window.create=async()=>{
 await addDoc(collection(db,"forms"),{
  name:name.value,
  enabled:true
 });
 name.value="";
 load();
};

window.toggle=async(id,val)=>{
 await updateDoc(doc(db,"forms",id),{enabled:val});
 load();
};
</script>

</body>
</html>
